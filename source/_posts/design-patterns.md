---
title: 设计模式的一些理论基础
date: 2021-09-08 10:05:23
tags: 设计模式
categories: 
  - 技术笔记
  - 设计模式
banner_img: /img/design_patterns.jpg
index_img: /img/design_patterns.jpg
---


### 面向对象四大特性
- 封装
    - 封装是指类利用 public private protected 通过暴露有限方法来实现外部访问类的内部信息或数据，存在的意义：保证数据不被随意修改，提高代码可维护性，仅暴露有限的接口，提高类的易用性
- 抽象
    - 封装讲隐藏信息，保护数据，抽象就是指隐藏了方法的具体实现，让调用者关系类提供了哪些功能，一般通过 抽象类 或 接口类实现
- 继承
    - 表示 类与类之间 is-a 的关系， 提高了代码的复用性
- 多态
    - 是指 子类可以替换父类的实现方法，是很多设计模式，设计原则，编程技巧的实现基础

### 面向对象编程一些编码思想

#### 接口类和抽象类的区别
- 接口类表示 has-a 的关系，抽象类表示 is-a的关系。抽象类也是另一种形式的继承

#### 有哪些看似是面向对象 实际是面向过程的编码风格
- 滥用 get set 方法
    - 每个属性都有get set 方法，破坏了封装特性，过度灵活，意味着不可控
   - 定义大而全的常量类 或 基础方法类
    - 基于贫血模式的mvc 开发 

#### 基于接口实现而非编程
- 这句话更合理的解释是，基于抽象而非实现编程。软件开发要具有抽象意识，越抽象，越顶层，越脱离某一具体实现的设计，越能提高代码的可维护性，比如 interface payment  和  alipayPayment implements payment

#### 多用组合 少用继承
- 多层继承 会降低代卖的可读性，两层内的层级关系适用继承。组合就是，抽出公共方法 用接口 或 trait 来实现


### 编码原则solid

#### 类的单一职责（s）
- 一个类只完成一个职责或一个功能，不要涉及大而全的类
- 如何判断一个类的职责是否单一
    - 代码行数过多
    - 依赖其他类或者方法过多
    - 私有方法过多
    - 给类起名字比较费劲

#### 开闭原则（对扩展开放，对修改关闭）(0)
- 如何理解
    - 新增功能时是对原有代码的基础上扩展代码（新增类/模块/方法）而非修改原有代码(方法/属性)，并不是完全杜绝修改，而是最小的改动代码代价来实现新的功能
- 如何做到
    - 具备扩展意识，抽象意识和封装意识，事先留好扩展点，需求变更不改变代码的整体结构，做到最小改动

#### 里式替换(l)
- 里式替换原则定义：父类函数定义了函数的约定，这里的约定是指函数声明要实现的功能，入参出参和异常的约定
- 和多态的区别：多态是面向对象的特性和语法，是实现代码的一种思路。里式替换是一种设计原则，也是基于多态这种编程思想来实现的

#### 接口隔离(i)
- 与类的单一职责类似

#### 依赖反转(d)
- 依赖反转
    - 上层模块不依赖底层模块，共同依赖一个抽象，比如 nginx 和 php-fpm 的关系，ngnix没有依赖php-fpm

- 控制反转(ioc)
    - 一种笼统的设计思想，主要用来指导框架层面的设计，框架来控制类的依赖而不是程序员来控制

- 依赖注入
    - 在类的外部实例化对象，不在类的内部new对象

#### KISS原则 和 YAGNI DAY 迪米特法则
   - kiss 代码保持简单，可读性好
   - yangi 不要做过度设计
   - day 不要有重复代码
   - 迪米特法则 不该依赖的类不要有依赖，有依赖的类，尽量只依赖必要的接口。希望减少类之间的耦合，让类独立，每个类都应该少了解系统的其他部分。
       - 和类的单一职责，基于接口而非实现编程都是实现高内聚 低耦合，这三个的区别是
           - 迪米特：从类的关系出发
           - 单一职责：从类提供的功能楚大
           - 基于接口而非实现：从调用者的角度出发